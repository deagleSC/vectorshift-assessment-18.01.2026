{"ast":null,"code":"// ui.js\n// Displays the drag-and-drop UI\nimport{useState,useRef,useCallback}from'react';import ReactFlow,{Controls,Background,MiniMap}from'reactflow';import{useStore}from'./store';import{shallow}from'zustand/shallow';import{MousePointer2}from'lucide-react';// Import refactored node components\nimport{InputNode,OutputNode,LLMNode,TextNode,APINode,ConditionalNode,TransformNode,MergeNode,FilterNode}from'./components/nodes';import'reactflow/dist/style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const gridSize=20;const proOptions={hideAttribution:true};// Register all node types\nconst nodeTypes={customInput:InputNode,customOutput:OutputNode,llm:LLMNode,text:TextNode,api:APINode,conditional:ConditionalNode,transform:TransformNode,merge:MergeNode,filter:FilterNode};// Minimap node colors by category\nconst nodeColorMap={customInput:'#3b82f6',customOutput:'#8b5cf6',llm:'#06b6d4',text:'#64748b',transform:'#10b981',merge:'#10b981',conditional:'#f59e0b',filter:'#f59e0b',api:'#ec4899'};const selector=state=>({nodes:state.nodes,edges:state.edges,getNodeID:state.getNodeID,addNode:state.addNode,onNodesChange:state.onNodesChange,onEdgesChange:state.onEdgesChange,onConnect:state.onConnect});export const PipelineUI=()=>{const reactFlowWrapper=useRef(null);const[reactFlowInstance,setReactFlowInstance]=useState(null);const{nodes,edges,getNodeID,addNode,onNodesChange,onEdgesChange,onConnect}=useStore(selector,shallow);const getInitNodeData=(nodeID,type)=>{return{id:nodeID,nodeType:type};};const onDrop=useCallback(event=>{var _event$dataTransfer;event.preventDefault();const reactFlowBounds=reactFlowWrapper.current.getBoundingClientRect();if(event!==null&&event!==void 0&&(_event$dataTransfer=event.dataTransfer)!==null&&_event$dataTransfer!==void 0&&_event$dataTransfer.getData('application/reactflow')){const appData=JSON.parse(event.dataTransfer.getData('application/reactflow'));const type=appData===null||appData===void 0?void 0:appData.nodeType;if(typeof type==='undefined'||!type){return;}const position=reactFlowInstance.project({x:event.clientX-reactFlowBounds.left,y:event.clientY-reactFlowBounds.top});const nodeID=getNodeID(type);const newNode={id:nodeID,type,position,data:getInitNodeData(nodeID,type)};addNode(newNode);}},[reactFlowInstance,getNodeID,addNode]);const onDragOver=useCallback(event=>{event.preventDefault();event.dataTransfer.dropEffect='move';},[]);return/*#__PURE__*/_jsx(\"div\",{ref:reactFlowWrapper,className:\"w-full h-full\",children:/*#__PURE__*/_jsxs(ReactFlow,{nodes:nodes,edges:edges,onNodesChange:onNodesChange,onEdgesChange:onEdgesChange,onConnect:onConnect,onDrop:onDrop,onDragOver:onDragOver,onInit:setReactFlowInstance,nodeTypes:nodeTypes,proOptions:proOptions,snapGrid:[gridSize,gridSize],snapToGrid:true,connectionLineType:\"smoothstep\",connectionLineStyle:{stroke:'#8b5cf6',strokeWidth:1.5},defaultEdgeOptions:{type:'smoothstep',style:{stroke:'#94a3b8',strokeWidth:1.5}},fitView:true,fitViewOptions:{padding:0.2},minZoom:0.1,maxZoom:2,children:[/*#__PURE__*/_jsx(Background,{color:\"#e2e8f0\",gap:gridSize,size:1,variant:\"dots\"}),/*#__PURE__*/_jsx(Controls,{showInteractive:false}),/*#__PURE__*/_jsx(MiniMap,{nodeColor:node=>nodeColorMap[node.type]||'#6b7280',nodeStrokeWidth:3,nodeBorderRadius:4,maskColor:\"rgba(0, 0, 0, 0.08)\",style:{width:140,height:90}}),nodes.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center pointer-events-none\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-6 bg-white rounded-lg border border-slate-200 shadow-sm pointer-events-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 mx-auto mb-3 rounded-lg bg-slate-100 flex items-center justify-center\",children:/*#__PURE__*/_jsx(MousePointer2,{className:\"w-5 h-5 text-slate-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-slate-700 mb-1\",children:\"Start Building\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500 max-w-[200px]\",children:\"Drag nodes from the toolbar to create your pipeline\"})]})})]})});};","map":{"version":3,"names":["useState","useRef","useCallback","ReactFlow","Controls","Background","MiniMap","useStore","shallow","MousePointer2","InputNode","OutputNode","LLMNode","TextNode","APINode","ConditionalNode","TransformNode","MergeNode","FilterNode","jsx","_jsx","jsxs","_jsxs","gridSize","proOptions","hideAttribution","nodeTypes","customInput","customOutput","llm","text","api","conditional","transform","merge","filter","nodeColorMap","selector","state","nodes","edges","getNodeID","addNode","onNodesChange","onEdgesChange","onConnect","PipelineUI","reactFlowWrapper","reactFlowInstance","setReactFlowInstance","getInitNodeData","nodeID","type","id","nodeType","onDrop","event","_event$dataTransfer","preventDefault","reactFlowBounds","current","getBoundingClientRect","dataTransfer","getData","appData","JSON","parse","position","project","x","clientX","left","y","clientY","top","newNode","data","onDragOver","dropEffect","ref","className","children","onInit","snapGrid","snapToGrid","connectionLineType","connectionLineStyle","stroke","strokeWidth","defaultEdgeOptions","style","fitView","fitViewOptions","padding","minZoom","maxZoom","color","gap","size","variant","showInteractive","nodeColor","node","nodeStrokeWidth","nodeBorderRadius","maskColor","width","height","length"],"sources":["/Users/supratik_personal/Downloads/frontend_technical_assessment/frontend/src/ui.js"],"sourcesContent":["// ui.js\n// Displays the drag-and-drop UI\n\nimport { useState, useRef, useCallback } from 'react';\nimport ReactFlow, { Controls, Background, MiniMap } from 'reactflow';\nimport { useStore } from './store';\nimport { shallow } from 'zustand/shallow';\nimport { MousePointer2 } from 'lucide-react';\n\n// Import refactored node components\nimport {\n  InputNode,\n  OutputNode,\n  LLMNode,\n  TextNode,\n  APINode,\n  ConditionalNode,\n  TransformNode,\n  MergeNode,\n  FilterNode,\n} from './components/nodes';\n\nimport 'reactflow/dist/style.css';\n\nconst gridSize = 20;\nconst proOptions = { hideAttribution: true };\n\n// Register all node types\nconst nodeTypes = {\n  customInput: InputNode,\n  customOutput: OutputNode,\n  llm: LLMNode,\n  text: TextNode,\n  api: APINode,\n  conditional: ConditionalNode,\n  transform: TransformNode,\n  merge: MergeNode,\n  filter: FilterNode,\n};\n\n// Minimap node colors by category\nconst nodeColorMap = {\n  customInput: '#3b82f6',\n  customOutput: '#8b5cf6',\n  llm: '#06b6d4',\n  text: '#64748b',\n  transform: '#10b981',\n  merge: '#10b981',\n  conditional: '#f59e0b',\n  filter: '#f59e0b',\n  api: '#ec4899',\n};\n\nconst selector = (state) => ({\n  nodes: state.nodes,\n  edges: state.edges,\n  getNodeID: state.getNodeID,\n  addNode: state.addNode,\n  onNodesChange: state.onNodesChange,\n  onEdgesChange: state.onEdgesChange,\n  onConnect: state.onConnect,\n});\n\nexport const PipelineUI = () => {\n  const reactFlowWrapper = useRef(null);\n  const [reactFlowInstance, setReactFlowInstance] = useState(null);\n  const {\n    nodes,\n    edges,\n    getNodeID,\n    addNode,\n    onNodesChange,\n    onEdgesChange,\n    onConnect,\n  } = useStore(selector, shallow);\n\n  const getInitNodeData = (nodeID, type) => {\n    return { id: nodeID, nodeType: type };\n  };\n\n  const onDrop = useCallback(\n    (event) => {\n      event.preventDefault();\n\n      const reactFlowBounds = reactFlowWrapper.current.getBoundingClientRect();\n      if (event?.dataTransfer?.getData('application/reactflow')) {\n        const appData = JSON.parse(\n          event.dataTransfer.getData('application/reactflow')\n        );\n        const type = appData?.nodeType;\n\n        if (typeof type === 'undefined' || !type) {\n          return;\n        }\n\n        const position = reactFlowInstance.project({\n          x: event.clientX - reactFlowBounds.left,\n          y: event.clientY - reactFlowBounds.top,\n        });\n\n        const nodeID = getNodeID(type);\n        const newNode = {\n          id: nodeID,\n          type,\n          position,\n          data: getInitNodeData(nodeID, type),\n        };\n\n        addNode(newNode);\n      }\n    },\n    [reactFlowInstance, getNodeID, addNode]\n  );\n\n  const onDragOver = useCallback((event) => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  }, []);\n\n  return (\n    <div ref={reactFlowWrapper} className=\"w-full h-full\">\n      <ReactFlow\n        nodes={nodes}\n        edges={edges}\n        onNodesChange={onNodesChange}\n        onEdgesChange={onEdgesChange}\n        onConnect={onConnect}\n        onDrop={onDrop}\n        onDragOver={onDragOver}\n        onInit={setReactFlowInstance}\n        nodeTypes={nodeTypes}\n        proOptions={proOptions}\n        snapGrid={[gridSize, gridSize]}\n        snapToGrid\n        connectionLineType=\"smoothstep\"\n        connectionLineStyle={{ stroke: '#8b5cf6', strokeWidth: 1.5 }}\n        defaultEdgeOptions={{\n          type: 'smoothstep',\n          style: { stroke: '#94a3b8', strokeWidth: 1.5 },\n        }}\n        fitView\n        fitViewOptions={{ padding: 0.2 }}\n        minZoom={0.1}\n        maxZoom={2}\n      >\n        <Background \n          color=\"#e2e8f0\" \n          gap={gridSize} \n          size={1}\n          variant=\"dots\"\n        />\n        <Controls showInteractive={false} />\n        <MiniMap\n          nodeColor={(node) => nodeColorMap[node.type] || '#6b7280'}\n          nodeStrokeWidth={3}\n          nodeBorderRadius={4}\n          maskColor=\"rgba(0, 0, 0, 0.08)\"\n          style={{ width: 140, height: 90 }}\n        />\n        \n        {/* Empty state - vertically and horizontally centered */}\n        {nodes.length === 0 && (\n          <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n            <div className=\"text-center p-6 bg-white rounded-lg border border-slate-200 shadow-sm pointer-events-auto\">\n              <div className=\"w-10 h-10 mx-auto mb-3 rounded-lg bg-slate-100 flex items-center justify-center\">\n                <MousePointer2 className=\"w-5 h-5 text-slate-400\" />\n              </div>\n              <h3 className=\"text-sm font-semibold text-slate-700 mb-1\">Start Building</h3>\n              <p className=\"text-xs text-slate-500 max-w-[200px]\">\n                Drag nodes from the toolbar to create your pipeline\n              </p>\n            </div>\n          </div>\n        )}\n      </ReactFlow>\n    </div>\n  );\n};\n"],"mappings":"AAAA;AACA;AAEA,OAASA,QAAQ,CAAEC,MAAM,CAAEC,WAAW,KAAQ,OAAO,CACrD,MAAO,CAAAC,SAAS,EAAIC,QAAQ,CAAEC,UAAU,CAAEC,OAAO,KAAQ,WAAW,CACpE,OAASC,QAAQ,KAAQ,SAAS,CAClC,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,aAAa,KAAQ,cAAc,CAE5C;AACA,OACEC,SAAS,CACTC,UAAU,CACVC,OAAO,CACPC,QAAQ,CACRC,OAAO,CACPC,eAAe,CACfC,aAAa,CACbC,SAAS,CACTC,UAAU,KACL,oBAAoB,CAE3B,MAAO,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAElC,KAAM,CAAAC,QAAQ,CAAG,EAAE,CACnB,KAAM,CAAAC,UAAU,CAAG,CAAEC,eAAe,CAAE,IAAK,CAAC,CAE5C;AACA,KAAM,CAAAC,SAAS,CAAG,CAChBC,WAAW,CAAEjB,SAAS,CACtBkB,YAAY,CAAEjB,UAAU,CACxBkB,GAAG,CAAEjB,OAAO,CACZkB,IAAI,CAAEjB,QAAQ,CACdkB,GAAG,CAAEjB,OAAO,CACZkB,WAAW,CAAEjB,eAAe,CAC5BkB,SAAS,CAAEjB,aAAa,CACxBkB,KAAK,CAAEjB,SAAS,CAChBkB,MAAM,CAAEjB,UACV,CAAC,CAED;AACA,KAAM,CAAAkB,YAAY,CAAG,CACnBT,WAAW,CAAE,SAAS,CACtBC,YAAY,CAAE,SAAS,CACvBC,GAAG,CAAE,SAAS,CACdC,IAAI,CAAE,SAAS,CACfG,SAAS,CAAE,SAAS,CACpBC,KAAK,CAAE,SAAS,CAChBF,WAAW,CAAE,SAAS,CACtBG,MAAM,CAAE,SAAS,CACjBJ,GAAG,CAAE,SACP,CAAC,CAED,KAAM,CAAAM,QAAQ,CAAIC,KAAK,GAAM,CAC3BC,KAAK,CAAED,KAAK,CAACC,KAAK,CAClBC,KAAK,CAAEF,KAAK,CAACE,KAAK,CAClBC,SAAS,CAAEH,KAAK,CAACG,SAAS,CAC1BC,OAAO,CAAEJ,KAAK,CAACI,OAAO,CACtBC,aAAa,CAAEL,KAAK,CAACK,aAAa,CAClCC,aAAa,CAAEN,KAAK,CAACM,aAAa,CAClCC,SAAS,CAAEP,KAAK,CAACO,SACnB,CAAC,CAAC,CAEF,MAAO,MAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CAC9B,KAAM,CAAAC,gBAAgB,CAAG9C,MAAM,CAAC,IAAI,CAAC,CACrC,KAAM,CAAC+C,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGjD,QAAQ,CAAC,IAAI,CAAC,CAChE,KAAM,CACJuC,KAAK,CACLC,KAAK,CACLC,SAAS,CACTC,OAAO,CACPC,aAAa,CACbC,aAAa,CACbC,SACF,CAAC,CAAGtC,QAAQ,CAAC8B,QAAQ,CAAE7B,OAAO,CAAC,CAE/B,KAAM,CAAA0C,eAAe,CAAGA,CAACC,MAAM,CAAEC,IAAI,GAAK,CACxC,MAAO,CAAEC,EAAE,CAAEF,MAAM,CAAEG,QAAQ,CAAEF,IAAK,CAAC,CACvC,CAAC,CAED,KAAM,CAAAG,MAAM,CAAGrD,WAAW,CACvBsD,KAAK,EAAK,KAAAC,mBAAA,CACTD,KAAK,CAACE,cAAc,CAAC,CAAC,CAEtB,KAAM,CAAAC,eAAe,CAAGZ,gBAAgB,CAACa,OAAO,CAACC,qBAAqB,CAAC,CAAC,CACxE,GAAIL,KAAK,SAALA,KAAK,YAAAC,mBAAA,CAALD,KAAK,CAAEM,YAAY,UAAAL,mBAAA,WAAnBA,mBAAA,CAAqBM,OAAO,CAAC,uBAAuB,CAAC,CAAE,CACzD,KAAM,CAAAC,OAAO,CAAGC,IAAI,CAACC,KAAK,CACxBV,KAAK,CAACM,YAAY,CAACC,OAAO,CAAC,uBAAuB,CACpD,CAAC,CACD,KAAM,CAAAX,IAAI,CAAGY,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEV,QAAQ,CAE9B,GAAI,MAAO,CAAAF,IAAI,GAAK,WAAW,EAAI,CAACA,IAAI,CAAE,CACxC,OACF,CAEA,KAAM,CAAAe,QAAQ,CAAGnB,iBAAiB,CAACoB,OAAO,CAAC,CACzCC,CAAC,CAAEb,KAAK,CAACc,OAAO,CAAGX,eAAe,CAACY,IAAI,CACvCC,CAAC,CAAEhB,KAAK,CAACiB,OAAO,CAAGd,eAAe,CAACe,GACrC,CAAC,CAAC,CAEF,KAAM,CAAAvB,MAAM,CAAGV,SAAS,CAACW,IAAI,CAAC,CAC9B,KAAM,CAAAuB,OAAO,CAAG,CACdtB,EAAE,CAAEF,MAAM,CACVC,IAAI,CACJe,QAAQ,CACRS,IAAI,CAAE1B,eAAe,CAACC,MAAM,CAAEC,IAAI,CACpC,CAAC,CAEDV,OAAO,CAACiC,OAAO,CAAC,CAClB,CACF,CAAC,CACD,CAAC3B,iBAAiB,CAAEP,SAAS,CAAEC,OAAO,CACxC,CAAC,CAED,KAAM,CAAAmC,UAAU,CAAG3E,WAAW,CAAEsD,KAAK,EAAK,CACxCA,KAAK,CAACE,cAAc,CAAC,CAAC,CACtBF,KAAK,CAACM,YAAY,CAACgB,UAAU,CAAG,MAAM,CACxC,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE1D,IAAA,QAAK2D,GAAG,CAAEhC,gBAAiB,CAACiC,SAAS,CAAC,eAAe,CAAAC,QAAA,cACnD3D,KAAA,CAACnB,SAAS,EACRoC,KAAK,CAAEA,KAAM,CACbC,KAAK,CAAEA,KAAM,CACbG,aAAa,CAAEA,aAAc,CAC7BC,aAAa,CAAEA,aAAc,CAC7BC,SAAS,CAAEA,SAAU,CACrBU,MAAM,CAAEA,MAAO,CACfsB,UAAU,CAAEA,UAAW,CACvBK,MAAM,CAAEjC,oBAAqB,CAC7BvB,SAAS,CAAEA,SAAU,CACrBF,UAAU,CAAEA,UAAW,CACvB2D,QAAQ,CAAE,CAAC5D,QAAQ,CAAEA,QAAQ,CAAE,CAC/B6D,UAAU,MACVC,kBAAkB,CAAC,YAAY,CAC/BC,mBAAmB,CAAE,CAAEC,MAAM,CAAE,SAAS,CAAEC,WAAW,CAAE,GAAI,CAAE,CAC7DC,kBAAkB,CAAE,CAClBrC,IAAI,CAAE,YAAY,CAClBsC,KAAK,CAAE,CAAEH,MAAM,CAAE,SAAS,CAAEC,WAAW,CAAE,GAAI,CAC/C,CAAE,CACFG,OAAO,MACPC,cAAc,CAAE,CAAEC,OAAO,CAAE,GAAI,CAAE,CACjCC,OAAO,CAAE,GAAI,CACbC,OAAO,CAAE,CAAE,CAAAd,QAAA,eAEX7D,IAAA,CAACf,UAAU,EACT2F,KAAK,CAAC,SAAS,CACfC,GAAG,CAAE1E,QAAS,CACd2E,IAAI,CAAE,CAAE,CACRC,OAAO,CAAC,MAAM,CACf,CAAC,cACF/E,IAAA,CAAChB,QAAQ,EAACgG,eAAe,CAAE,KAAM,CAAE,CAAC,cACpChF,IAAA,CAACd,OAAO,EACN+F,SAAS,CAAGC,IAAI,EAAKlE,YAAY,CAACkE,IAAI,CAAClD,IAAI,CAAC,EAAI,SAAU,CAC1DmD,eAAe,CAAE,CAAE,CACnBC,gBAAgB,CAAE,CAAE,CACpBC,SAAS,CAAC,qBAAqB,CAC/Bf,KAAK,CAAE,CAAEgB,KAAK,CAAE,GAAG,CAAEC,MAAM,CAAE,EAAG,CAAE,CACnC,CAAC,CAGDpE,KAAK,CAACqE,MAAM,GAAK,CAAC,eACjBxF,IAAA,QAAK4D,SAAS,CAAC,uEAAuE,CAAAC,QAAA,cACpF3D,KAAA,QAAK0D,SAAS,CAAC,2FAA2F,CAAAC,QAAA,eACxG7D,IAAA,QAAK4D,SAAS,CAAC,iFAAiF,CAAAC,QAAA,cAC9F7D,IAAA,CAACX,aAAa,EAACuE,SAAS,CAAC,wBAAwB,CAAE,CAAC,CACjD,CAAC,cACN5D,IAAA,OAAI4D,SAAS,CAAC,2CAA2C,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cAC7E7D,IAAA,MAAG4D,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CAAC,qDAEpD,CAAG,CAAC,EACD,CAAC,CACH,CACN,EACQ,CAAC,CACT,CAAC,CAEV,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}