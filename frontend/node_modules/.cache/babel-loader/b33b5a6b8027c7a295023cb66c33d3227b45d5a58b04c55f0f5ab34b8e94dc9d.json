{"ast":null,"code":"// submit.js\nimport{useState}from'react';import{useStore}from'./store';import{Button}from'./components/ui/button';import{Dialog,DialogContent,DialogHeader,DialogTitle}from'./components/ui/dialog';import{Loader2,Play,Check,AlertCircle,Network,GitBranch,CheckCircle}from'lucide-react';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const SubmitButton=()=>{const{nodes,edges}=useStore();const[loading,setLoading]=useState(false);const[result,setResult]=useState(null);const[error,setError]=useState(null);const[dialogOpen,setDialogOpen]=useState(false);const handleSubmit=async()=>{setLoading(true);setError(null);try{const response=await fetch('http://localhost:8000/pipelines/parse',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({nodes:nodes.map(node=>({id:node.id,type:node.type,data:node.data})),edges:edges.map(edge=>({source:edge.source,target:edge.target}))})});if(!response.ok){throw new Error('Failed to parse pipeline');}const data=await response.json();setResult(data);setDialogOpen(true);}catch(err){setError(err.message);setDialogOpen(true);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,disabled:loading||nodes.length===0,className:\"h-8 px-4 bg-primary hover:bg-primary/90 text-white font-medium text-sm rounded-md shadow-none\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader2,{className:\"w-4 h-4 mr-2 animate-spin\"}),\"Analyzing...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Play,{className:\"w-4 h-4 mr-2\",fill:\"currentColor\"}),\"Submit\"]})}),/*#__PURE__*/_jsx(Dialog,{open:dialogOpen,onOpenChange:setDialogOpen,children:/*#__PURE__*/_jsxs(DialogContent,{className:\"max-w-sm p-0 overflow-hidden\",children:[/*#__PURE__*/_jsx(DialogHeader,{className:\"px-5 pt-5 pb-4 border-b border-slate-100\",children:/*#__PURE__*/_jsx(DialogTitle,{className:\"flex items-center gap-2 text-base font-semibold\",children:error?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-5 h-5 text-red-500\"}),\"Error\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5 text-emerald-500\"}),\"Pipeline Analysis Complete\"]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-5 py-4\",children:error?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:error}):result&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:\"Your pipeline has been validated successfully.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center p-3 bg-blue-50 rounded-lg border border-blue-100\",children:[/*#__PURE__*/_jsx(Network,{className:\"w-5 h-5 text-blue-500 mb-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-blue-600\",children:result.num_nodes}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-blue-500 font-medium\",children:\"Nodes\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center p-3 bg-purple-50 rounded-lg border border-purple-100\",children:[/*#__PURE__*/_jsx(GitBranch,{className:\"w-5 h-5 text-purple-500 mb-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-purple-600\",children:result.num_edges}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-purple-500 font-medium\",children:\"Edges\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center p-3 rounded-lg border \".concat(result.is_dag?'bg-emerald-50 border-emerald-100':'bg-red-50 border-red-100'),children:[/*#__PURE__*/_jsx(Check,{className:\"w-5 h-5 mb-1 \".concat(result.is_dag?'text-emerald-500':'text-red-500')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-bold \".concat(result.is_dag?'text-emerald-600':'text-red-600'),children:result.is_dag?'Yes':'No'}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium \".concat(result.is_dag?'text-emerald-500':'text-red-500'),children:\"Valid DAG\"})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-5 py-3 bg-slate-50 border-t border-slate-100 flex justify-end\",children:/*#__PURE__*/_jsx(Button,{onClick:()=>setDialogOpen(false),className:\"h-8 px-4 bg-primary hover:bg-primary/90 text-white font-medium text-sm\",children:\"Close\"})})]})})]});};","map":{"version":3,"names":["useState","useStore","Button","Dialog","DialogContent","DialogHeader","DialogTitle","Loader2","Play","Check","AlertCircle","Network","GitBranch","CheckCircle","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SubmitButton","nodes","edges","loading","setLoading","result","setResult","error","setError","dialogOpen","setDialogOpen","handleSubmit","response","fetch","method","headers","body","JSON","stringify","map","node","id","type","data","edge","source","target","ok","Error","json","err","message","children","onClick","disabled","length","className","fill","open","onOpenChange","num_nodes","num_edges","concat","is_dag"],"sources":["/Users/supratik_personal/Downloads/frontend_technical_assessment/frontend/src/submit.js"],"sourcesContent":["// submit.js\n\nimport { useState } from 'react';\nimport { useStore } from './store';\nimport { Button } from './components/ui/button';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from './components/ui/dialog';\nimport { Loader2, Play, Check, AlertCircle, Network, GitBranch, CheckCircle } from 'lucide-react';\n\nexport const SubmitButton = () => {\n  const { nodes, edges } = useStore();\n  const [loading, setLoading] = useState(false);\n  const [result, setResult] = useState(null);\n  const [error, setError] = useState(null);\n  const [dialogOpen, setDialogOpen] = useState(false);\n\n  const handleSubmit = async () => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      const response = await fetch('http://localhost:8000/pipelines/parse', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          nodes: nodes.map((node) => ({\n            id: node.id,\n            type: node.type,\n            data: node.data,\n          })),\n          edges: edges.map((edge) => ({\n            source: edge.source,\n            target: edge.target,\n          })),\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to parse pipeline');\n      }\n\n      const data = await response.json();\n      setResult(data);\n      setDialogOpen(true);\n    } catch (err) {\n      setError(err.message);\n      setDialogOpen(true);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <>\n      <Button\n        onClick={handleSubmit}\n        disabled={loading || nodes.length === 0}\n        className=\"h-8 px-4 bg-primary hover:bg-primary/90 text-white font-medium text-sm rounded-md shadow-none\"\n      >\n        {loading ? (\n          <>\n            <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n            Analyzing...\n          </>\n        ) : (\n          <>\n            <Play className=\"w-4 h-4 mr-2\" fill=\"currentColor\" />\n            Submit\n          </>\n        )}\n      </Button>\n\n      <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\n        <DialogContent className=\"max-w-sm p-0 overflow-hidden\">\n          <DialogHeader className=\"px-5 pt-5 pb-4 border-b border-slate-100\">\n            <DialogTitle className=\"flex items-center gap-2 text-base font-semibold\">\n              {error ? (\n                <>\n                  <AlertCircle className=\"w-5 h-5 text-red-500\" />\n                  Error\n                </>\n              ) : (\n                <>\n                  <CheckCircle className=\"w-5 h-5 text-emerald-500\" />\n                  Pipeline Analysis Complete\n                </>\n              )}\n            </DialogTitle>\n          </DialogHeader>\n          \n          <div className=\"px-5 py-4\">\n            {error ? (\n              <p className=\"text-sm text-red-600\">{error}</p>\n            ) : result && (\n              <div className=\"space-y-3\">\n                <p className=\"text-sm text-slate-500\">Your pipeline has been validated successfully.</p>\n                \n                <div className=\"grid grid-cols-3 gap-3\">\n                  {/* Nodes */}\n                  <div className=\"flex flex-col items-center p-3 bg-blue-50 rounded-lg border border-blue-100\">\n                    <Network className=\"w-5 h-5 text-blue-500 mb-1\" />\n                    <span className=\"text-2xl font-bold text-blue-600\">{result.num_nodes}</span>\n                    <span className=\"text-xs text-blue-500 font-medium\">Nodes</span>\n                  </div>\n                  \n                  {/* Edges */}\n                  <div className=\"flex flex-col items-center p-3 bg-purple-50 rounded-lg border border-purple-100\">\n                    <GitBranch className=\"w-5 h-5 text-purple-500 mb-1\" />\n                    <span className=\"text-2xl font-bold text-purple-600\">{result.num_edges}</span>\n                    <span className=\"text-xs text-purple-500 font-medium\">Edges</span>\n                  </div>\n                  \n                  {/* DAG Status */}\n                  <div className={`flex flex-col items-center p-3 rounded-lg border ${\n                    result.is_dag \n                      ? 'bg-emerald-50 border-emerald-100' \n                      : 'bg-red-50 border-red-100'\n                  }`}>\n                    <Check className={`w-5 h-5 mb-1 ${\n                      result.is_dag ? 'text-emerald-500' : 'text-red-500'\n                    }`} />\n                    <span className={`text-lg font-bold ${\n                      result.is_dag ? 'text-emerald-600' : 'text-red-600'\n                    }`}>\n                      {result.is_dag ? 'Yes' : 'No'}\n                    </span>\n                    <span className={`text-xs font-medium ${\n                      result.is_dag ? 'text-emerald-500' : 'text-red-500'\n                    }`}>Valid DAG</span>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n          \n          <div className=\"px-5 py-3 bg-slate-50 border-t border-slate-100 flex justify-end\">\n            <Button\n              onClick={() => setDialogOpen(false)}\n              className=\"h-8 px-4 bg-primary hover:bg-primary/90 text-white font-medium text-sm\"\n            >\n              Close\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}