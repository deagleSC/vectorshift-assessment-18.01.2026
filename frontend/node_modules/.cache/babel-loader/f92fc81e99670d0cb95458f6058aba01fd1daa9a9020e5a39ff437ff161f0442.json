{"ast":null,"code":"var _jsxFileName = \"/Users/supratik_personal/Downloads/frontend_technical_assessment/frontend/src/components/nodes/TextNode.jsx\",\n  _s = $RefreshSig$();\n// TextNode.jsx - Refactored with dynamic handles for variables\n\nimport { useState, useEffect, useMemo, useCallback } from 'react';\nimport { BaseNode } from './BaseNode';\nimport { TextAreaField } from '../fields';\nimport { nodeConfig } from '../../config/nodeConfig';\nimport { useStore } from '../../store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst config = nodeConfig.text;\n\n// Extract variables from text using {{variableName}} pattern\nconst extractVariables = text => {\n  const regex = /\\{\\{([a-zA-Z_$][a-zA-Z0-9_$]*)\\}\\}/g;\n  const variables = new Set();\n  let match;\n  while ((match = regex.exec(text)) !== null) {\n    variables.add(match[1]);\n  }\n  return Array.from(variables);\n};\nexport const TextNode = ({\n  id,\n  data,\n  selected\n}) => {\n  _s();\n  const [text, setText] = useState((data === null || data === void 0 ? void 0 : data.text) || '{{input}}');\n  const updateNodeField = useStore(state => state.updateNodeField);\n\n  // Extract variables for dynamic handles\n  const variables = useMemo(() => extractVariables(text), [text]);\n\n  // Create dynamic inputs from variables\n  const dynamicInputs = useMemo(() => {\n    return variables.map(varName => ({\n      id: varName,\n      label: varName\n    }));\n  }, [variables]);\n\n  // Calculate dynamic dimensions based on text content\n  const dimensions = useMemo(() => {\n    const lineCount = text.split('\\n').length;\n    const maxLineLength = Math.max(...text.split('\\n').map(line => line.length));\n\n    // Base dimensions\n    const baseWidth = 220;\n    const baseHeight = 120;\n\n    // Calculate width based on longest line (approx 7px per character)\n    const calculatedWidth = Math.min(Math.max(baseWidth, maxLineLength * 7 + 60), 400);\n\n    // Calculate height based on line count (approx 20px per line)\n    const calculatedHeight = Math.min(Math.max(baseHeight, lineCount * 20 + 100), 300);\n    return {\n      width: calculatedWidth,\n      height: calculatedHeight\n    };\n  }, [text]);\n\n  // Update store when text changes\n  useEffect(() => {\n    updateNodeField(id, 'text', text);\n  }, [id, text, updateNodeField]);\n\n  // Update store with current variables\n  useEffect(() => {\n    updateNodeField(id, 'variables', variables);\n  }, [id, variables, updateNodeField]);\n  const handleTextChange = useCallback(newText => {\n    setText(newText);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(BaseNode, {\n    id: id,\n    title: config.title,\n    icon: config.icon,\n    category: config.category,\n    inputs: dynamicInputs,\n    outputs: config.defaultOutputs,\n    selected: selected,\n    minWidth: dimensions.width,\n    minHeight: dimensions.height,\n    children: [/*#__PURE__*/_jsxDEV(TextAreaField, {\n      label: \"Text\",\n      value: text,\n      onChange: handleTextChange,\n      placeholder: \"Enter text with {{variables}}\",\n      rows: Math.max(3, text.split('\\n').length),\n      textareaClassName: \"font-mono text-xs\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), variables.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap gap-1 mt-2\",\n      children: variables.map(v => /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"px-2 py-0.5 text-[10px] bg-primary/10 text-primary rounded-full\",\n        children: `{{${v}}}`\n      }, v, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n_s(TextNode, \"iMKu8yil548ywrUoXAqTPL5ge7w=\", false, function () {\n  return [useStore];\n});\n_c = TextNode;\nexport default TextNode;\nvar _c;\n$RefreshReg$(_c, \"TextNode\");","map":{"version":3,"names":["useState","useEffect","useMemo","useCallback","BaseNode","TextAreaField","nodeConfig","useStore","jsxDEV","_jsxDEV","config","text","extractVariables","regex","variables","Set","match","exec","add","Array","from","TextNode","id","data","selected","_s","setText","updateNodeField","state","dynamicInputs","map","varName","label","dimensions","lineCount","split","length","maxLineLength","Math","max","line","baseWidth","baseHeight","calculatedWidth","min","calculatedHeight","width","height","handleTextChange","newText","title","icon","category","inputs","outputs","defaultOutputs","minWidth","minHeight","children","value","onChange","placeholder","rows","textareaClassName","fileName","_jsxFileName","lineNumber","columnNumber","className","v","_c","$RefreshReg$"],"sources":["/Users/supratik_personal/Downloads/frontend_technical_assessment/frontend/src/components/nodes/TextNode.jsx"],"sourcesContent":["// TextNode.jsx - Refactored with dynamic handles for variables\n\nimport { useState, useEffect, useMemo, useCallback } from 'react';\nimport { BaseNode } from './BaseNode';\nimport { TextAreaField } from '../fields';\nimport { nodeConfig } from '../../config/nodeConfig';\nimport { useStore } from '../../store';\n\nconst config = nodeConfig.text;\n\n// Extract variables from text using {{variableName}} pattern\nconst extractVariables = (text) => {\n  const regex = /\\{\\{([a-zA-Z_$][a-zA-Z0-9_$]*)\\}\\}/g;\n  const variables = new Set();\n  let match;\n  while ((match = regex.exec(text)) !== null) {\n    variables.add(match[1]);\n  }\n  return Array.from(variables);\n};\n\nexport const TextNode = ({ id, data, selected }) => {\n  const [text, setText] = useState(data?.text || '{{input}}');\n  const updateNodeField = useStore((state) => state.updateNodeField);\n\n  // Extract variables for dynamic handles\n  const variables = useMemo(() => extractVariables(text), [text]);\n\n  // Create dynamic inputs from variables\n  const dynamicInputs = useMemo(() => {\n    return variables.map((varName) => ({\n      id: varName,\n      label: varName,\n    }));\n  }, [variables]);\n\n  // Calculate dynamic dimensions based on text content\n  const dimensions = useMemo(() => {\n    const lineCount = text.split('\\n').length;\n    const maxLineLength = Math.max(...text.split('\\n').map(line => line.length));\n    \n    // Base dimensions\n    const baseWidth = 220;\n    const baseHeight = 120;\n    \n    // Calculate width based on longest line (approx 7px per character)\n    const calculatedWidth = Math.min(Math.max(baseWidth, maxLineLength * 7 + 60), 400);\n    \n    // Calculate height based on line count (approx 20px per line)\n    const calculatedHeight = Math.min(Math.max(baseHeight, lineCount * 20 + 100), 300);\n    \n    return { width: calculatedWidth, height: calculatedHeight };\n  }, [text]);\n\n  // Update store when text changes\n  useEffect(() => {\n    updateNodeField(id, 'text', text);\n  }, [id, text, updateNodeField]);\n\n  // Update store with current variables\n  useEffect(() => {\n    updateNodeField(id, 'variables', variables);\n  }, [id, variables, updateNodeField]);\n\n  const handleTextChange = useCallback((newText) => {\n    setText(newText);\n  }, []);\n\n  return (\n    <BaseNode\n      id={id}\n      title={config.title}\n      icon={config.icon}\n      category={config.category}\n      inputs={dynamicInputs}\n      outputs={config.defaultOutputs}\n      selected={selected}\n      minWidth={dimensions.width}\n      minHeight={dimensions.height}\n    >\n      <TextAreaField\n        label=\"Text\"\n        value={text}\n        onChange={handleTextChange}\n        placeholder=\"Enter text with {{variables}}\"\n        rows={Math.max(3, text.split('\\n').length)}\n        textareaClassName=\"font-mono text-xs\"\n      />\n      {variables.length > 0 && (\n        <div className=\"flex flex-wrap gap-1 mt-2\">\n          {variables.map((v) => (\n            <span\n              key={v}\n              className=\"px-2 py-0.5 text-[10px] bg-primary/10 text-primary rounded-full\"\n            >\n              {`{{${v}}}`}\n            </span>\n          ))}\n        </div>\n      )}\n    </BaseNode>\n  );\n};\n\nexport default TextNode;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}