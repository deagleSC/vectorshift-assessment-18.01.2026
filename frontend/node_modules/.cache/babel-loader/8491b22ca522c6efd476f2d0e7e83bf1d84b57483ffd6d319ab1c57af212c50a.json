{"ast":null,"code":"// TextNode.jsx - Text node with dynamic handles, variable validation, and autocomplete\nimport{useState,useEffect,useMemo,useCallback,useRef}from'react';import{useEdges,useNodes}from'reactflow';import{BaseNode}from'./BaseNode';import{nodeConfig}from'../../config/nodeConfig';import{useStore}from'../../store';import{cn}from'../../lib/utils';import{AlertCircle,Info}from'lucide-react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const config=nodeConfig.text;// Extract variables from text using {{variableName}} or {{nodeId.handle}} pattern\nconst extractVariables=text=>{const regex=/\\{\\{([a-zA-Z_$][a-zA-Z0-9_$.-]*)\\}\\}/g;const variables=new Set();let match;while((match=regex.exec(text))!==null){variables.add(match[1]);}return Array.from(variables);};// Highlighted text display component\nconst HighlightedText=_ref=>{let{text,validVars,invalidVars}=_ref;if(!text)return null;const parts=text.split(/(\\{\\{[a-zA-Z_$][a-zA-Z0-9_$.-]*\\}\\})/g);return/*#__PURE__*/_jsx(\"div\",{className:\"whitespace-pre-wrap break-words text-[11px] font-mono leading-relaxed\",children:parts.map((part,index)=>{const match=part.match(/^\\{\\{([a-zA-Z_$][a-zA-Z0-9_$.-]*)\\}\\}$/);if(match){const varName=match[1];const isValid=validVars.includes(varName);const isInvalid=invalidVars.includes(varName);return/*#__PURE__*/_jsx(\"span\",{className:cn('px-1 py-0.5 rounded text-[10px]',isValid?'bg-emerald-100 text-emerald-700 border border-emerald-200':isInvalid?'bg-red-100 text-red-700 border border-red-200':'bg-amber-100 text-amber-700 border border-amber-200'),children:part},index);}return/*#__PURE__*/_jsx(\"span\",{className:\"text-slate-600\",children:part},index);})});};// Autocomplete dropdown component\nconst AutocompleteDropdown=_ref2=>{let{variables,onSelect,position}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"absolute z-50 bg-white border border-slate-200 rounded-md shadow-lg py-1 min-w-[220px] max-h-[200px] overflow-auto\",style:{top:position.top,left:position.left},children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-2 py-1 text-[10px] font-medium text-slate-400 uppercase border-b border-slate-100\",children:\"Available Variables\"}),variables.length>0?variables.map((v,index)=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onSelect(v.fullName),className:\"w-full px-2 py-1.5 text-left hover:bg-primary/5 flex items-center justify-between gap-2 transition-colors\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-mono text-primary font-medium\",children:\"{{\".concat(v.fullName,\"}}\")}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] text-slate-400 bg-slate-50 px-1.5 py-0.5 rounded\",children:v.nodeType})]},index)):/*#__PURE__*/_jsxs(\"div\",{className:\"px-2 py-3 text-xs text-slate-400 text-center\",children:[\"No other nodes on canvas yet.\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px]\",children:\"Add nodes to see their outputs here.\"})]})]});};export const TextNode=_ref3=>{let{id,data,selected}=_ref3;const[text,setText]=useState((data===null||data===void 0?void 0:data.text)||'');const[showAutocomplete,setShowAutocomplete]=useState(false);const[autocompletePos,setAutocompletePos]=useState({top:0,left:0});const[cursorPosition,setCursorPosition]=useState(0);const textareaRef=useRef(null);const updateNodeField=useStore(state=>state.updateNodeField);// Use hooks that properly track changes\nconst allNodes=useNodes();const allEdges=useEdges();// Extract variables for dynamic handles\nconst variables=useMemo(()=>extractVariables(text),[text]);// Get ALL available variables from ALL other nodes\n// Format: nodeName.outputHandle (e.g., input_1.value, llm.response)\nconst availableVariables=useMemo(()=>{const availableVars=[];allNodes.forEach(node=>{// Skip self\nif(node.id===id)return;const nodeConfigItem=nodeConfig[node.type];if(nodeConfigItem&&nodeConfigItem.defaultOutputs){var _node$data,_node$data2;// Get the display name from node data based on node type\nlet nodeName=node.id;// fallback to node ID\nif(node.type==='customInput'&&(_node$data=node.data)!==null&&_node$data!==void 0&&_node$data.inputName){nodeName=node.data.inputName;}else if(node.type==='customOutput'&&(_node$data2=node.data)!==null&&_node$data2!==void 0&&_node$data2.outputName){nodeName=node.data.outputName;}else if(node.type==='llm'){nodeName='llm';}else if(node.type==='text'){nodeName='text';}// Add output variables from this node in format: nodeName.outputId\nnodeConfigItem.defaultOutputs.forEach(output=>{const fullName=\"\".concat(nodeName,\".\").concat(output.id);availableVars.push({fullName,nodeId:node.id,handleId:output.id,handleLabel:output.label,nodeType:nodeConfigItem.title,displayName:nodeName,type:output.type||'Text'});});}});return availableVars;},[id,allNodes]);// Map of valid variable names\nconst validVariableNames=useMemo(()=>{return new Set(availableVariables.map(v=>v.fullName));},[availableVariables]);// Find which handles are connected to this node\nconst connectedHandles=useMemo(()=>{return allEdges.filter(e=>e.target===id).map(e=>e.targetHandle);},[id,allEdges]);// Categorize variables\nconst{validVars,invalidVars,unconnectedVars}=useMemo(()=>{const valid=[];const invalid=[];const unconnected=[];variables.forEach(v=>{if(validVariableNames.has(v)){if(connectedHandles.includes(v)){valid.push(v);}else{unconnected.push(v);}}else{invalid.push(v);}});return{validVars:valid,invalidVars:invalid,unconnectedVars:unconnected};},[variables,validVariableNames,connectedHandles]);// Create inputs - always have a default \"input\" handle plus dynamic ones for variables\nconst allInputs=useMemo(()=>{const inputs=[];// Add handles for each valid variable used\nvariables.forEach(varName=>{if(validVariableNames.has(varName)&&!inputs.find(i=>i.id===varName)){inputs.push({id:varName,label:varName.split('.').pop()// Show just the handle name\n});}});// Always have at least a default input handle if no variables\nif(inputs.length===0){inputs.push({id:'input',label:'input'});}return inputs;},[variables,validVariableNames]);// Calculate dynamic dimensions based on text content\nconst dimensions=useMemo(()=>{const lines=text.split('\\n');const lineCount=lines.length;const maxLineLength=Math.max(...lines.map(line=>line.length),0);const hasWarnings=invalidVars.length>0||unconnectedVars.length>0;const baseWidth=280;const baseHeight=hasWarnings?240:200;const charWidth=6.5;const paddingWidth=80;const lineHeight=18;const paddingHeight=hasWarnings?200:160;const calculatedWidth=Math.min(Math.max(baseWidth,maxLineLength*charWidth+paddingWidth),480);const calculatedHeight=Math.min(Math.max(baseHeight,lineCount*lineHeight+paddingHeight),450);return{width:calculatedWidth,height:calculatedHeight};},[text,invalidVars.length,unconnectedVars.length]);// Update store when text changes\nuseEffect(()=>{updateNodeField(id,'text',text);},[id,text,updateNodeField]);// Update store with current variables\nuseEffect(()=>{updateNodeField(id,'variables',variables);},[id,variables,updateNodeField]);// Handle text input change\nconst handleTextChange=useCallback(e=>{const newText=e.target.value;const cursorPos=e.target.selectionStart;setText(newText);setCursorPosition(cursorPos);// Check if we should show autocomplete\nconst textBeforeCursor=newText.slice(0,cursorPos);const lastTwoChars=textBeforeCursor.slice(-2);if(lastTwoChars==='{{'){const textarea=textareaRef.current;if(textarea){const lineHeight=18;const lines=textBeforeCursor.split('\\n');const currentLine=lines.length;const top=currentLine*lineHeight+80;setAutocompletePos({top,left:10});setShowAutocomplete(true);}}else{setShowAutocomplete(false);}},[]);// Handle autocomplete selection\nconst handleAutocompleteSelect=useCallback(varName=>{const textarea=textareaRef.current;if(textarea){const beforeCursor=text.slice(0,cursorPosition);const afterCursor=text.slice(cursorPosition);const newText=beforeCursor+varName+'}}'+afterCursor;setText(newText);setShowAutocomplete(false);setTimeout(()=>{textarea.focus();const newCursorPos=cursorPosition+varName.length+2;textarea.setSelectionRange(newCursorPos,newCursorPos);},0);}},[text,cursorPosition]);// Close autocomplete on blur\nconst handleBlur=useCallback(()=>{setTimeout(()=>setShowAutocomplete(false),200);},[]);return/*#__PURE__*/_jsx(BaseNode,{id:id,title:config.title,icon:config.icon,category:config.category,inputs:allInputs,outputs:config.defaultOutputs,selected:selected,minWidth:dimensions.width,minHeight:dimensions.height,children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-1.5 p-1.5 bg-blue-50/50 border border-blue-100 rounded text-[10px] text-blue-600\",children:[/*#__PURE__*/_jsx(Info,{className:\"w-3 h-3 flex-shrink-0 mt-0.5\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Type \",/*#__PURE__*/_jsx(\"code\",{className:\"px-1 bg-blue-100 rounded\",children:'{{'}),\" to insert variables\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"textarea\",{ref:textareaRef,value:text,onChange:handleTextChange,onBlur:handleBlur,placeholder:\"Hello {{customInput-1.value}}!\",className:\"w-full p-2 text-[11px] font-mono bg-slate-50 border border-slate-200 rounded-md focus:outline-none focus:bg-white focus:border-primary focus:ring-1 focus:ring-primary/20 transition-colors resize-none leading-relaxed nodrag\",style:{minHeight:Math.max(60,text.split('\\n').length*18+10)}}),showAutocomplete&&/*#__PURE__*/_jsx(AutocompleteDropdown,{variables:availableVariables,onSelect:handleAutocompleteSelect,position:autocompletePos})]}),text&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-slate-50/50 border border-slate-100 rounded-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] font-medium text-slate-400 uppercase mb-1\",children:\"Preview\"}),/*#__PURE__*/_jsx(HighlightedText,{text:text,validVars:validVars,invalidVars:[...invalidVars,...unconnectedVars]})]}),unconnectedVars.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-1.5 p-2 bg-amber-50 border border-amber-100 rounded-md\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-3.5 h-3.5 text-amber-500 flex-shrink-0 mt-0.5\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] font-medium text-amber-700\",children:\"Unconnected variables\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] text-amber-600\",children:[unconnectedVars.map(v=>\"{{\".concat(v,\"}}\")).join(', '),\" \\u2014 connect the source nodes\"]})]})]}),invalidVars.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-1.5 p-2 bg-red-50 border border-red-100 rounded-md\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-3.5 h-3.5 text-red-500 flex-shrink-0 mt-0.5\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] font-medium text-red-700\",children:\"Invalid variables\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] text-red-600\",children:[invalidVars.map(v=>\"{{\".concat(v,\"}}\")).join(', '),\" \\u2014 no matching node output\"]})]})]})]})});};export default TextNode;","map":{"version":3,"names":["useState","useEffect","useMemo","useCallback","useRef","useEdges","useNodes","BaseNode","nodeConfig","useStore","cn","AlertCircle","Info","jsx","_jsx","jsxs","_jsxs","config","text","extractVariables","regex","variables","Set","match","exec","add","Array","from","HighlightedText","_ref","validVars","invalidVars","parts","split","className","children","map","part","index","varName","isValid","includes","isInvalid","AutocompleteDropdown","_ref2","onSelect","position","style","top","left","length","v","onClick","fullName","concat","nodeType","TextNode","_ref3","id","data","selected","setText","showAutocomplete","setShowAutocomplete","autocompletePos","setAutocompletePos","cursorPosition","setCursorPosition","textareaRef","updateNodeField","state","allNodes","allEdges","availableVariables","availableVars","forEach","node","nodeConfigItem","type","defaultOutputs","_node$data","_node$data2","nodeName","inputName","outputName","output","push","nodeId","handleId","handleLabel","label","title","displayName","validVariableNames","connectedHandles","filter","e","target","targetHandle","unconnectedVars","valid","invalid","unconnected","has","allInputs","inputs","find","i","pop","dimensions","lines","lineCount","maxLineLength","Math","max","line","hasWarnings","baseWidth","baseHeight","charWidth","paddingWidth","lineHeight","paddingHeight","calculatedWidth","min","calculatedHeight","width","height","handleTextChange","newText","value","cursorPos","selectionStart","textBeforeCursor","slice","lastTwoChars","textarea","current","currentLine","handleAutocompleteSelect","beforeCursor","afterCursor","setTimeout","focus","newCursorPos","setSelectionRange","handleBlur","icon","category","outputs","minWidth","minHeight","ref","onChange","onBlur","placeholder","join"],"sources":["/Users/supratik_personal/Downloads/frontend_technical_assessment/frontend/src/components/nodes/TextNode.jsx"],"sourcesContent":["// TextNode.jsx - Text node with dynamic handles, variable validation, and autocomplete\n\nimport { useState, useEffect, useMemo, useCallback, useRef } from 'react';\nimport { useEdges, useNodes } from 'reactflow';\nimport { BaseNode } from './BaseNode';\nimport { nodeConfig } from '../../config/nodeConfig';\nimport { useStore } from '../../store';\nimport { cn } from '../../lib/utils';\nimport { AlertCircle, Info } from 'lucide-react';\n\nconst config = nodeConfig.text;\n\n// Extract variables from text using {{variableName}} or {{nodeId.handle}} pattern\nconst extractVariables = (text) => {\n  const regex = /\\{\\{([a-zA-Z_$][a-zA-Z0-9_$.-]*)\\}\\}/g;\n  const variables = new Set();\n  let match;\n  while ((match = regex.exec(text)) !== null) {\n    variables.add(match[1]);\n  }\n  return Array.from(variables);\n};\n\n// Highlighted text display component\nconst HighlightedText = ({ text, validVars, invalidVars }) => {\n  if (!text) return null;\n\n  const parts = text.split(/(\\{\\{[a-zA-Z_$][a-zA-Z0-9_$.-]*\\}\\})/g);\n\n  return (\n    <div className=\"whitespace-pre-wrap break-words text-[11px] font-mono leading-relaxed\">\n      {parts.map((part, index) => {\n        const match = part.match(/^\\{\\{([a-zA-Z_$][a-zA-Z0-9_$.-]*)\\}\\}$/);\n        if (match) {\n          const varName = match[1];\n          const isValid = validVars.includes(varName);\n          const isInvalid = invalidVars.includes(varName);\n          return (\n            <span\n              key={index}\n              className={cn(\n                'px-1 py-0.5 rounded text-[10px]',\n                isValid\n                  ? 'bg-emerald-100 text-emerald-700 border border-emerald-200'\n                  : isInvalid\n                    ? 'bg-red-100 text-red-700 border border-red-200'\n                    : 'bg-amber-100 text-amber-700 border border-amber-200'\n              )}\n            >\n              {part}\n            </span>\n          );\n        }\n        return <span key={index} className=\"text-slate-600\">{part}</span>;\n      })}\n    </div>\n  );\n};\n\n// Autocomplete dropdown component\nconst AutocompleteDropdown = ({ variables, onSelect, position }) => {\n  return (\n    <div\n      className=\"absolute z-50 bg-white border border-slate-200 rounded-md shadow-lg py-1 min-w-[220px] max-h-[200px] overflow-auto\"\n      style={{ top: position.top, left: position.left }}\n    >\n      <div className=\"px-2 py-1 text-[10px] font-medium text-slate-400 uppercase border-b border-slate-100\">\n        Available Variables\n      </div>\n      {variables.length > 0 ? (\n        variables.map((v, index) => (\n          <button\n            key={index}\n            onClick={() => onSelect(v.fullName)}\n            className=\"w-full px-2 py-1.5 text-left hover:bg-primary/5 flex items-center justify-between gap-2 transition-colors\"\n          >\n            <span className=\"text-xs font-mono text-primary font-medium\">{`{{${v.fullName}}}`}</span>\n            <span className=\"text-[10px] text-slate-400 bg-slate-50 px-1.5 py-0.5 rounded\">{v.nodeType}</span>\n          </button>\n        ))\n      ) : (\n        <div className=\"px-2 py-3 text-xs text-slate-400 text-center\">\n          No other nodes on canvas yet.\n          <br />\n          <span className=\"text-[10px]\">Add nodes to see their outputs here.</span>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport const TextNode = ({ id, data, selected }) => {\n  const [text, setText] = useState(data?.text || '');\n  const [showAutocomplete, setShowAutocomplete] = useState(false);\n  const [autocompletePos, setAutocompletePos] = useState({ top: 0, left: 0 });\n  const [cursorPosition, setCursorPosition] = useState(0);\n  const textareaRef = useRef(null);\n  const updateNodeField = useStore((state) => state.updateNodeField);\n\n  // Use hooks that properly track changes\n  const allNodes = useNodes();\n  const allEdges = useEdges();\n\n  // Extract variables for dynamic handles\n  const variables = useMemo(() => extractVariables(text), [text]);\n\n  // Get ALL available variables from ALL other nodes\n  // Format: nodeName.outputHandle (e.g., input_1.value, llm.response)\n  const availableVariables = useMemo(() => {\n    const availableVars = [];\n\n    allNodes.forEach(node => {\n      // Skip self\n      if (node.id === id) return;\n\n      const nodeConfigItem = nodeConfig[node.type];\n      if (nodeConfigItem && nodeConfigItem.defaultOutputs) {\n        // Get the display name from node data based on node type\n        let nodeName = node.id; // fallback to node ID\n\n        if (node.type === 'customInput' && node.data?.inputName) {\n          nodeName = node.data.inputName;\n        } else if (node.type === 'customOutput' && node.data?.outputName) {\n          nodeName = node.data.outputName;\n        } else if (node.type === 'llm') {\n          nodeName = 'llm';\n        } else if (node.type === 'text') {\n          nodeName = 'text';\n        }\n\n        // Add output variables from this node in format: nodeName.outputId\n        nodeConfigItem.defaultOutputs.forEach(output => {\n          const fullName = `${nodeName}.${output.id}`;\n\n          availableVars.push({\n            fullName,\n            nodeId: node.id,\n            handleId: output.id,\n            handleLabel: output.label,\n            nodeType: nodeConfigItem.title,\n            displayName: nodeName,\n            type: output.type || 'Text',\n          });\n        });\n      }\n    });\n\n    return availableVars;\n  }, [id, allNodes]);\n\n  // Map of valid variable names\n  const validVariableNames = useMemo(() => {\n    return new Set(availableVariables.map(v => v.fullName));\n  }, [availableVariables]);\n\n  // Find which handles are connected to this node\n  const connectedHandles = useMemo(() => {\n    return allEdges.filter(e => e.target === id).map(e => e.targetHandle);\n  }, [id, allEdges]);\n\n  // Categorize variables\n  const { validVars, invalidVars, unconnectedVars } = useMemo(() => {\n    const valid = [];\n    const invalid = [];\n    const unconnected = [];\n\n    variables.forEach(v => {\n      if (validVariableNames.has(v)) {\n        if (connectedHandles.includes(v)) {\n          valid.push(v);\n        } else {\n          unconnected.push(v);\n        }\n      } else {\n        invalid.push(v);\n      }\n    });\n\n    return { validVars: valid, invalidVars: invalid, unconnectedVars: unconnected };\n  }, [variables, validVariableNames, connectedHandles]);\n\n  // Create inputs - always have a default \"input\" handle plus dynamic ones for variables\n  const allInputs = useMemo(() => {\n    const inputs = [];\n\n    // Add handles for each valid variable used\n    variables.forEach(varName => {\n      if (validVariableNames.has(varName) && !inputs.find(i => i.id === varName)) {\n        inputs.push({\n          id: varName,\n          label: varName.split('.').pop() // Show just the handle name\n        });\n      }\n    });\n\n    // Always have at least a default input handle if no variables\n    if (inputs.length === 0) {\n      inputs.push({ id: 'input', label: 'input' });\n    }\n\n    return inputs;\n  }, [variables, validVariableNames]);\n\n  // Calculate dynamic dimensions based on text content\n  const dimensions = useMemo(() => {\n    const lines = text.split('\\n');\n    const lineCount = lines.length;\n    const maxLineLength = Math.max(...lines.map(line => line.length), 0);\n\n    const hasWarnings = invalidVars.length > 0 || unconnectedVars.length > 0;\n    const baseWidth = 280;\n    const baseHeight = hasWarnings ? 240 : 200;\n    const charWidth = 6.5;\n    const paddingWidth = 80;\n    const lineHeight = 18;\n    const paddingHeight = hasWarnings ? 200 : 160;\n\n    const calculatedWidth = Math.min(\n      Math.max(baseWidth, maxLineLength * charWidth + paddingWidth),\n      480\n    );\n\n    const calculatedHeight = Math.min(\n      Math.max(baseHeight, lineCount * lineHeight + paddingHeight),\n      450\n    );\n\n    return { width: calculatedWidth, height: calculatedHeight };\n  }, [text, invalidVars.length, unconnectedVars.length]);\n\n  // Update store when text changes\n  useEffect(() => {\n    updateNodeField(id, 'text', text);\n  }, [id, text, updateNodeField]);\n\n  // Update store with current variables\n  useEffect(() => {\n    updateNodeField(id, 'variables', variables);\n  }, [id, variables, updateNodeField]);\n\n  // Handle text input change\n  const handleTextChange = useCallback((e) => {\n    const newText = e.target.value;\n    const cursorPos = e.target.selectionStart;\n    setText(newText);\n    setCursorPosition(cursorPos);\n\n    // Check if we should show autocomplete\n    const textBeforeCursor = newText.slice(0, cursorPos);\n    const lastTwoChars = textBeforeCursor.slice(-2);\n\n    if (lastTwoChars === '{{') {\n      const textarea = textareaRef.current;\n      if (textarea) {\n        const lineHeight = 18;\n        const lines = textBeforeCursor.split('\\n');\n        const currentLine = lines.length;\n        const top = currentLine * lineHeight + 80;\n        setAutocompletePos({ top, left: 10 });\n        setShowAutocomplete(true);\n      }\n    } else {\n      setShowAutocomplete(false);\n    }\n  }, []);\n\n  // Handle autocomplete selection\n  const handleAutocompleteSelect = useCallback((varName) => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      const beforeCursor = text.slice(0, cursorPosition);\n      const afterCursor = text.slice(cursorPosition);\n      const newText = beforeCursor + varName + '}}' + afterCursor;\n      setText(newText);\n      setShowAutocomplete(false);\n\n      setTimeout(() => {\n        textarea.focus();\n        const newCursorPos = cursorPosition + varName.length + 2;\n        textarea.setSelectionRange(newCursorPos, newCursorPos);\n      }, 0);\n    }\n  }, [text, cursorPosition]);\n\n  // Close autocomplete on blur\n  const handleBlur = useCallback(() => {\n    setTimeout(() => setShowAutocomplete(false), 200);\n  }, []);\n\n  return (\n    <BaseNode\n      id={id}\n      title={config.title}\n      icon={config.icon}\n      category={config.category}\n      inputs={allInputs}\n      outputs={config.defaultOutputs}\n      selected={selected}\n      minWidth={dimensions.width}\n      minHeight={dimensions.height}\n    >\n      <div className=\"space-y-2 relative\">\n        {/* Help text */}\n        <div className=\"flex items-start gap-1.5 p-1.5 bg-blue-50/50 border border-blue-100 rounded text-[10px] text-blue-600\">\n          <Info className=\"w-3 h-3 flex-shrink-0 mt-0.5\" />\n          <span>Type <code className=\"px-1 bg-blue-100 rounded\">{'{{'}</code> to insert variables</span>\n        </div>\n\n        {/* Textarea with autocomplete */}\n        <div className=\"relative\">\n          <textarea\n            ref={textareaRef}\n            value={text}\n            onChange={handleTextChange}\n            onBlur={handleBlur}\n            placeholder='Hello {{customInput-1.value}}!'\n            className=\"w-full p-2 text-[11px] font-mono bg-slate-50 border border-slate-200 rounded-md focus:outline-none focus:bg-white focus:border-primary focus:ring-1 focus:ring-primary/20 transition-colors resize-none leading-relaxed nodrag\"\n            style={{ minHeight: Math.max(60, text.split('\\n').length * 18 + 10) }}\n          />\n\n          {/* Autocomplete dropdown */}\n          {showAutocomplete && (\n            <AutocompleteDropdown\n              variables={availableVariables}\n              onSelect={handleAutocompleteSelect}\n              position={autocompletePos}\n            />\n          )}\n        </div>\n\n        {/* Preview with highlighting */}\n        {text && (\n          <div className=\"p-2 bg-slate-50/50 border border-slate-100 rounded-md\">\n            <div className=\"text-[10px] font-medium text-slate-400 uppercase mb-1\">Preview</div>\n            <HighlightedText text={text} validVars={validVars} invalidVars={[...invalidVars, ...unconnectedVars]} />\n          </div>\n        )}\n\n        {/* Unconnected variables warning */}\n        {unconnectedVars.length > 0 && (\n          <div className=\"flex items-start gap-1.5 p-2 bg-amber-50 border border-amber-100 rounded-md\">\n            <AlertCircle className=\"w-3.5 h-3.5 text-amber-500 flex-shrink-0 mt-0.5\" />\n            <div>\n              <p className=\"text-[10px] font-medium text-amber-700\">\n                Unconnected variables\n              </p>\n              <p className=\"text-[10px] text-amber-600\">\n                {unconnectedVars.map(v => `{{${v}}}`).join(', ')} — connect the source nodes\n              </p>\n            </div>\n          </div>\n        )}\n\n        {/* Invalid variables warning */}\n        {invalidVars.length > 0 && (\n          <div className=\"flex items-start gap-1.5 p-2 bg-red-50 border border-red-100 rounded-md\">\n            <AlertCircle className=\"w-3.5 h-3.5 text-red-500 flex-shrink-0 mt-0.5\" />\n            <div>\n              <p className=\"text-[10px] font-medium text-red-700\">\n                Invalid variables\n              </p>\n              <p className=\"text-[10px] text-red-600\">\n                {invalidVars.map(v => `{{${v}}}`).join(', ')} — no matching node output\n              </p>\n            </div>\n          </div>\n        )}\n      </div>\n    </BaseNode>\n  );\n};\n\nexport default TextNode;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}