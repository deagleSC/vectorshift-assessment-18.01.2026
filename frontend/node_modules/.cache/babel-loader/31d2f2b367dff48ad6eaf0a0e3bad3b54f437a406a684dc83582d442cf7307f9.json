{"ast":null,"code":"var _jsxFileName = \"/Users/supratik_personal/Downloads/frontend_technical_assessment/frontend/src/components/nodes/TextNode.jsx\",\n  _s = $RefreshSig$();\n// TextNode.jsx - Refactored with dynamic handles for variables\n\nimport { useState, useEffect, useMemo, useCallback } from 'react';\nimport { BaseNode } from './BaseNode';\nimport { TextAreaField } from '../fields';\nimport { nodeConfig } from '../../config/nodeConfig';\nimport { useStore } from '../../store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst config = nodeConfig.text;\n\n// Extract variables from text using {{variableName}} pattern\nconst extractVariables = text => {\n  const regex = /\\{\\{([a-zA-Z_$][a-zA-Z0-9_$]*)\\}\\}/g;\n  const variables = new Set();\n  let match;\n  while ((match = regex.exec(text)) !== null) {\n    variables.add(match[1]);\n  }\n  return Array.from(variables);\n};\nexport const TextNode = ({\n  id,\n  data,\n  selected\n}) => {\n  _s();\n  const [text, setText] = useState((data === null || data === void 0 ? void 0 : data.text) || '{{input}}');\n  const updateNodeField = useStore(state => state.updateNodeField);\n\n  // Extract variables for dynamic handles\n  const variables = useMemo(() => extractVariables(text), [text]);\n\n  // Create dynamic inputs from variables\n  const dynamicInputs = useMemo(() => {\n    return variables.map(varName => ({\n      id: varName,\n      label: varName\n    }));\n  }, [variables]);\n\n  // Calculate dynamic dimensions based on text content\n  const dimensions = useMemo(() => {\n    const lines = text.split('\\n');\n    const lineCount = lines.length;\n    const maxLineLength = Math.max(...lines.map(line => line.length));\n\n    // Base dimensions\n    const baseWidth = 260;\n    const baseHeight = 140;\n\n    // Calculate width based on longest line (approx 7px per character)\n    const calculatedWidth = Math.min(Math.max(baseWidth, maxLineLength * 7 + 80), 400);\n\n    // Calculate height based on line count (approx 22px per line)\n    const calculatedHeight = Math.min(Math.max(baseHeight, lineCount * 22 + 120), 350);\n    return {\n      width: calculatedWidth,\n      height: calculatedHeight\n    };\n  }, [text]);\n\n  // Update store when text changes\n  useEffect(() => {\n    updateNodeField(id, 'text', text);\n  }, [id, text, updateNodeField]);\n\n  // Update store with current variables\n  useEffect(() => {\n    updateNodeField(id, 'variables', variables);\n  }, [id, variables, updateNodeField]);\n  const handleTextChange = useCallback(newText => {\n    setText(newText);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(BaseNode, {\n    id: id,\n    title: config.title,\n    icon: config.icon,\n    category: config.category,\n    inputs: dynamicInputs,\n    outputs: config.defaultOutputs,\n    selected: selected,\n    minWidth: dimensions.width,\n    minHeight: dimensions.height,\n    children: [/*#__PURE__*/_jsxDEV(TextAreaField, {\n      label: \"Text\",\n      value: text,\n      onChange: handleTextChange,\n      placeholder: \"Enter text with {{variables}}\",\n      rows: Math.max(3, text.split('\\n').length),\n      textareaClassName: \"font-mono text-xs leading-relaxed\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), variables.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pt-2 border-t border-gray-100\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-[10px] font-medium text-gray-400 uppercase tracking-wide mb-1.5\",\n        children: [\"Variables (\", variables.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap gap-1.5\",\n        children: variables.map(v => /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"inline-flex items-center px-2 py-0.5 text-[10px] font-medium bg-emerald-100 text-emerald-700 rounded-md border border-emerald-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-emerald-400 mr-0.5\",\n            children: '{'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 17\n          }, this), v, /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-emerald-400 ml-0.5\",\n            children: '}'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 17\n          }, this)]\n        }, v, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(TextNode, \"iMKu8yil548ywrUoXAqTPL5ge7w=\", false, function () {\n  return [useStore];\n});\n_c = TextNode;\nexport default TextNode;\nvar _c;\n$RefreshReg$(_c, \"TextNode\");","map":{"version":3,"names":["useState","useEffect","useMemo","useCallback","BaseNode","TextAreaField","nodeConfig","useStore","jsxDEV","_jsxDEV","config","text","extractVariables","regex","variables","Set","match","exec","add","Array","from","TextNode","id","data","selected","_s","setText","updateNodeField","state","dynamicInputs","map","varName","label","dimensions","lines","split","lineCount","length","maxLineLength","Math","max","line","baseWidth","baseHeight","calculatedWidth","min","calculatedHeight","width","height","handleTextChange","newText","title","icon","category","inputs","outputs","defaultOutputs","minWidth","minHeight","children","value","onChange","placeholder","rows","textareaClassName","fileName","_jsxFileName","lineNumber","columnNumber","className","v","_c","$RefreshReg$"],"sources":["/Users/supratik_personal/Downloads/frontend_technical_assessment/frontend/src/components/nodes/TextNode.jsx"],"sourcesContent":["// TextNode.jsx - Refactored with dynamic handles for variables\n\nimport { useState, useEffect, useMemo, useCallback } from 'react';\nimport { BaseNode } from './BaseNode';\nimport { TextAreaField } from '../fields';\nimport { nodeConfig } from '../../config/nodeConfig';\nimport { useStore } from '../../store';\n\nconst config = nodeConfig.text;\n\n// Extract variables from text using {{variableName}} pattern\nconst extractVariables = (text) => {\n  const regex = /\\{\\{([a-zA-Z_$][a-zA-Z0-9_$]*)\\}\\}/g;\n  const variables = new Set();\n  let match;\n  while ((match = regex.exec(text)) !== null) {\n    variables.add(match[1]);\n  }\n  return Array.from(variables);\n};\n\nexport const TextNode = ({ id, data, selected }) => {\n  const [text, setText] = useState(data?.text || '{{input}}');\n  const updateNodeField = useStore((state) => state.updateNodeField);\n\n  // Extract variables for dynamic handles\n  const variables = useMemo(() => extractVariables(text), [text]);\n\n  // Create dynamic inputs from variables\n  const dynamicInputs = useMemo(() => {\n    return variables.map((varName) => ({\n      id: varName,\n      label: varName,\n    }));\n  }, [variables]);\n\n  // Calculate dynamic dimensions based on text content\n  const dimensions = useMemo(() => {\n    const lines = text.split('\\n');\n    const lineCount = lines.length;\n    const maxLineLength = Math.max(...lines.map(line => line.length));\n    \n    // Base dimensions\n    const baseWidth = 260;\n    const baseHeight = 140;\n    \n    // Calculate width based on longest line (approx 7px per character)\n    const calculatedWidth = Math.min(Math.max(baseWidth, maxLineLength * 7 + 80), 400);\n    \n    // Calculate height based on line count (approx 22px per line)\n    const calculatedHeight = Math.min(Math.max(baseHeight, lineCount * 22 + 120), 350);\n    \n    return { width: calculatedWidth, height: calculatedHeight };\n  }, [text]);\n\n  // Update store when text changes\n  useEffect(() => {\n    updateNodeField(id, 'text', text);\n  }, [id, text, updateNodeField]);\n\n  // Update store with current variables\n  useEffect(() => {\n    updateNodeField(id, 'variables', variables);\n  }, [id, variables, updateNodeField]);\n\n  const handleTextChange = useCallback((newText) => {\n    setText(newText);\n  }, []);\n\n  return (\n    <BaseNode\n      id={id}\n      title={config.title}\n      icon={config.icon}\n      category={config.category}\n      inputs={dynamicInputs}\n      outputs={config.defaultOutputs}\n      selected={selected}\n      minWidth={dimensions.width}\n      minHeight={dimensions.height}\n    >\n      <TextAreaField\n        label=\"Text\"\n        value={text}\n        onChange={handleTextChange}\n        placeholder=\"Enter text with {{variables}}\"\n        rows={Math.max(3, text.split('\\n').length)}\n        textareaClassName=\"font-mono text-xs leading-relaxed\"\n      />\n      {variables.length > 0 && (\n        <div className=\"pt-2 border-t border-gray-100\">\n          <p className=\"text-[10px] font-medium text-gray-400 uppercase tracking-wide mb-1.5\">\n            Variables ({variables.length})\n          </p>\n          <div className=\"flex flex-wrap gap-1.5\">\n            {variables.map((v) => (\n              <span\n                key={v}\n                className=\"inline-flex items-center px-2 py-0.5 text-[10px] font-medium bg-emerald-100 text-emerald-700 rounded-md border border-emerald-200\"\n              >\n                <span className=\"text-emerald-400 mr-0.5\">{'{'}</span>\n                {v}\n                <span className=\"text-emerald-400 ml-0.5\">{'}'}</span>\n              </span>\n            ))}\n          </div>\n        </div>\n      )}\n    </BaseNode>\n  );\n};\n\nexport default TextNode;\n"],"mappings":";;AAAA;;AAEA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,OAAO,EAAEC,WAAW,QAAQ,OAAO;AACjE,SAASC,QAAQ,QAAQ,YAAY;AACrC,SAASC,aAAa,QAAQ,WAAW;AACzC,SAASC,UAAU,QAAQ,yBAAyB;AACpD,SAASC,QAAQ,QAAQ,aAAa;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvC,MAAMC,MAAM,GAAGJ,UAAU,CAACK,IAAI;;AAE9B;AACA,MAAMC,gBAAgB,GAAID,IAAI,IAAK;EACjC,MAAME,KAAK,GAAG,qCAAqC;EACnD,MAAMC,SAAS,GAAG,IAAIC,GAAG,CAAC,CAAC;EAC3B,IAAIC,KAAK;EACT,OAAO,CAACA,KAAK,GAAGH,KAAK,CAACI,IAAI,CAACN,IAAI,CAAC,MAAM,IAAI,EAAE;IAC1CG,SAAS,CAACI,GAAG,CAACF,KAAK,CAAC,CAAC,CAAC,CAAC;EACzB;EACA,OAAOG,KAAK,CAACC,IAAI,CAACN,SAAS,CAAC;AAC9B,CAAC;AAED,OAAO,MAAMO,QAAQ,GAAGA,CAAC;EAAEC,EAAE;EAAEC,IAAI;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAClD,MAAM,CAACd,IAAI,EAAEe,OAAO,CAAC,GAAG1B,QAAQ,CAAC,CAAAuB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEZ,IAAI,KAAI,WAAW,CAAC;EAC3D,MAAMgB,eAAe,GAAGpB,QAAQ,CAAEqB,KAAK,IAAKA,KAAK,CAACD,eAAe,CAAC;;EAElE;EACA,MAAMb,SAAS,GAAGZ,OAAO,CAAC,MAAMU,gBAAgB,CAACD,IAAI,CAAC,EAAE,CAACA,IAAI,CAAC,CAAC;;EAE/D;EACA,MAAMkB,aAAa,GAAG3B,OAAO,CAAC,MAAM;IAClC,OAAOY,SAAS,CAACgB,GAAG,CAAEC,OAAO,KAAM;MACjCT,EAAE,EAAES,OAAO;MACXC,KAAK,EAAED;IACT,CAAC,CAAC,CAAC;EACL,CAAC,EAAE,CAACjB,SAAS,CAAC,CAAC;;EAEf;EACA,MAAMmB,UAAU,GAAG/B,OAAO,CAAC,MAAM;IAC/B,MAAMgC,KAAK,GAAGvB,IAAI,CAACwB,KAAK,CAAC,IAAI,CAAC;IAC9B,MAAMC,SAAS,GAAGF,KAAK,CAACG,MAAM;IAC9B,MAAMC,aAAa,GAAGC,IAAI,CAACC,GAAG,CAAC,GAAGN,KAAK,CAACJ,GAAG,CAACW,IAAI,IAAIA,IAAI,CAACJ,MAAM,CAAC,CAAC;;IAEjE;IACA,MAAMK,SAAS,GAAG,GAAG;IACrB,MAAMC,UAAU,GAAG,GAAG;;IAEtB;IACA,MAAMC,eAAe,GAAGL,IAAI,CAACM,GAAG,CAACN,IAAI,CAACC,GAAG,CAACE,SAAS,EAAEJ,aAAa,GAAG,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC;;IAElF;IACA,MAAMQ,gBAAgB,GAAGP,IAAI,CAACM,GAAG,CAACN,IAAI,CAACC,GAAG,CAACG,UAAU,EAAEP,SAAS,GAAG,EAAE,GAAG,GAAG,CAAC,EAAE,GAAG,CAAC;IAElF,OAAO;MAAEW,KAAK,EAAEH,eAAe;MAAEI,MAAM,EAAEF;IAAiB,CAAC;EAC7D,CAAC,EAAE,CAACnC,IAAI,CAAC,CAAC;;EAEV;EACAV,SAAS,CAAC,MAAM;IACd0B,eAAe,CAACL,EAAE,EAAE,MAAM,EAAEX,IAAI,CAAC;EACnC,CAAC,EAAE,CAACW,EAAE,EAAEX,IAAI,EAAEgB,eAAe,CAAC,CAAC;;EAE/B;EACA1B,SAAS,CAAC,MAAM;IACd0B,eAAe,CAACL,EAAE,EAAE,WAAW,EAAER,SAAS,CAAC;EAC7C,CAAC,EAAE,CAACQ,EAAE,EAAER,SAAS,EAAEa,eAAe,CAAC,CAAC;EAEpC,MAAMsB,gBAAgB,GAAG9C,WAAW,CAAE+C,OAAO,IAAK;IAChDxB,OAAO,CAACwB,OAAO,CAAC;EAClB,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEzC,OAAA,CAACL,QAAQ;IACPkB,EAAE,EAAEA,EAAG;IACP6B,KAAK,EAAEzC,MAAM,CAACyC,KAAM;IACpBC,IAAI,EAAE1C,MAAM,CAAC0C,IAAK;IAClBC,QAAQ,EAAE3C,MAAM,CAAC2C,QAAS;IAC1BC,MAAM,EAAEzB,aAAc;IACtB0B,OAAO,EAAE7C,MAAM,CAAC8C,cAAe;IAC/BhC,QAAQ,EAAEA,QAAS;IACnBiC,QAAQ,EAAExB,UAAU,CAACc,KAAM;IAC3BW,SAAS,EAAEzB,UAAU,CAACe,MAAO;IAAAW,QAAA,gBAE7BlD,OAAA,CAACJ,aAAa;MACZ2B,KAAK,EAAC,MAAM;MACZ4B,KAAK,EAAEjD,IAAK;MACZkD,QAAQ,EAAEZ,gBAAiB;MAC3Ba,WAAW,EAAC,+BAA+B;MAC3CC,IAAI,EAAExB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE7B,IAAI,CAACwB,KAAK,CAAC,IAAI,CAAC,CAACE,MAAM,CAAE;MAC3C2B,iBAAiB,EAAC;IAAmC;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtD,CAAC,EACDtD,SAAS,CAACuB,MAAM,GAAG,CAAC,iBACnB5B,OAAA;MAAK4D,SAAS,EAAC,+BAA+B;MAAAV,QAAA,gBAC5ClD,OAAA;QAAG4D,SAAS,EAAC,sEAAsE;QAAAV,QAAA,GAAC,aACvE,EAAC7C,SAAS,CAACuB,MAAM,EAAC,GAC/B;MAAA;QAAA4B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eACJ3D,OAAA;QAAK4D,SAAS,EAAC,wBAAwB;QAAAV,QAAA,EACpC7C,SAAS,CAACgB,GAAG,CAAEwC,CAAC,iBACf7D,OAAA;UAEE4D,SAAS,EAAC,mIAAmI;UAAAV,QAAA,gBAE7IlD,OAAA;YAAM4D,SAAS,EAAC,yBAAyB;YAAAV,QAAA,EAAE;UAAG;YAAAM,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,EACrDE,CAAC,eACF7D,OAAA;YAAM4D,SAAS,EAAC,yBAAyB;YAAAV,QAAA,EAAE;UAAG;YAAAM,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA,GALjDE,CAAC;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAMF,CACP;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACO,CAAC;AAEf,CAAC;AAAC3C,EAAA,CAzFWJ,QAAQ;EAAA,QAEKd,QAAQ;AAAA;AAAAgE,EAAA,GAFrBlD,QAAQ;AA2FrB,eAAeA,QAAQ;AAAC,IAAAkD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}